!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Perezoso=e()}(this,function(){"use strict";var t=function(t,r,n){var o=document.createElement("img");o.onload=function(){n&&n.call(o)},r.title&&(o.title=r.title),r.errorHandler&&o.setAttribute("onerror",r.errorHandler),r.srcset&&o.setAttribute("srcset",r.srcset),r.class&&o.setAttribute("class",r.class),o.alt=r.alt,o.src=r.src,e(t,o)},e=function(t,e){var r=t.parentNode;r&&r.replaceChild(e,t)},r=function(t){return{src:t.getAttribute("data-src"),"class":t.getAttribute("data-class"),alt:t.getAttribute("data-alt"),title:t.getAttribute("data-title"),errorHandler:t.getAttribute("data-error-handler"),srcset:t.getAttribute("data-srcset")}},n=function(t){return t||{}},o=function(e,o){var a=r(e);o=n(o),a.src&&(a.alt||""===a.alt)?t(e,a,o.onloadCallback):o.onerrorCallback&&o.onerrorCallback.call(e)},a=function(t,e){var r=window.innerHeight||document.documentElement.clientHeight,n=e||0;return t.getBoundingClientRect().top-r<=n},i=function(t,e){var r=function(n){a(t,e.threshold)&&(o(t,e),window.removeEventListener?window.removeEventListener(n.type,r,!1):window.detachEvent("on"+n.type,r))};return r},l=function(t,e){var r=n(e);if(a(t,r.threshold))o(t,e);else{var l=i(t,r);window.addEventListener?window.addEventListener("scroll",l,!1):window.attachEvent("onscroll",l)}},c=function(t,e){for(var r=document.querySelectorAll("."+t),n=0;n<r.length;++n)Perezoso.registerLazyLoad(r[n],e)};return{lazyLoad:o,registerLazyLoad:l,registerLazyLoadByClass:c}});